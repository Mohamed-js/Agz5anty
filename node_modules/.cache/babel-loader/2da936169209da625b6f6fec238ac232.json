{"ast":null,"code":"function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { noOp } from \"../util/Interface\";\n/**\n * TransportEvent is an internal class used by [[Transport]]\n * to schedule events. Do no invoke this class directly, it is\n * handled from within Tone.Transport.\n */\n\nexport var TransportEvent = /*#__PURE__*/function () {\n  /**\n   * @param transport The transport object which the event belongs to\n   */\n  function TransportEvent(transport, opts) {\n    _classCallCheck(this, TransportEvent);\n\n    /**\n     * The unique id of the event\n     */\n    this.id = TransportEvent._eventId++;\n    /**\n     * The remaining value between the passed in time, and Math.floor(time).\n     * This value is later added back when scheduling to get sub-tick precision.\n     */\n\n    this._remainderTime = 0;\n    var options = Object.assign(TransportEvent.getDefaults(), opts);\n    this.transport = transport;\n    this.callback = options.callback;\n    this._once = options.once;\n    this.time = Math.floor(options.time);\n    this._remainderTime = options.time - this.time;\n  }\n\n  _createClass(TransportEvent, [{\n    key: \"floatTime\",\n    get:\n    /**\n     * Get the time and remainder time.\n     */\n    function get() {\n      return this.time + this._remainderTime;\n    }\n    /**\n     * Invoke the event callback.\n     * @param  time  The AudioContext time in seconds of the event\n     */\n\n  }, {\n    key: \"invoke\",\n    value: function invoke(time) {\n      if (this.callback) {\n        var tickDuration = this.transport.bpm.getDurationOfTicks(1, time);\n        this.callback(time + this._remainderTime * tickDuration);\n\n        if (this._once) {\n          this.transport.clear(this.id);\n        }\n      }\n    }\n    /**\n     * Clean up\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.callback = undefined;\n      return this;\n    }\n  }], [{\n    key: \"getDefaults\",\n    value: function getDefaults() {\n      return {\n        callback: noOp,\n        once: false,\n        time: 0\n      };\n    }\n  }]);\n\n  return TransportEvent;\n}();\n/**\n * Current ID counter\n */\n\nTransportEvent._eventId = 0;","map":null,"metadata":{},"sourceType":"module"}